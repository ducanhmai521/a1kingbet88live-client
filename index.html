<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A1KingBET88 - T√†i X·ªâu (Live)</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- START: Added Notification Modal -->
    <div id="transferNotificationModal" class="modal-overlay">
        <div id="transferNotificationPanel" class="modal-panel notification-panel">
            <button id="closeNotificationBtnX" class="close-btn">√ó</button>
            <h2 id="notificationTitle"><i id="notificationIcon" class="fas"></i> <span></span></h2>

            <!-- Success Details Area -->
            <div id="notificationSuccessDetails" style="display: none;">
                <div class="notification-details">
                     <div class="detail-row">
                        <span class="detail-label"><i class="fas fa-arrow-up"></i> Ng∆∞·ªùi g·ª≠i:</span>
                        <span class="detail-value" id="notificationSenderInfo"></span>
                     </div>
                     <div class="detail-row">
                        <span class="detail-label"><i class="fas fa-arrow-down"></i> Ng∆∞·ªùi nh·∫≠n:</span>
                        <span class="detail-value" id="notificationRecipientInfo"></span>
                     </div>
                     <div class="detail-row">
                        <span class="detail-label"><i class="fas fa-coins"></i> S·ªë ƒëi·ªÉm:</span>
                        <span class="detail-value" id="notificationAmount"></span>
                     </div>
                     <div class="detail-row">
                        <span class="detail-label"><i class="far fa-clock"></i> Th·ªùi gian:</span>
                        <span class="detail-value" id="notificationTimestamp"></span>
                     </div>
                </div>
            </div>

            <!-- Error Message Area -->
            <div id="notificationErrorDetails" style="display: none;">
                <p id="notificationErrorMessage" class="error-message notification-error-text"></p>
            </div>

            <button id="closeNotificationBtnConfirm" class="control-button notification-confirm-btn">ƒê√£ Hi·ªÉu</button>
        </div>
    </div>
    <!-- END: Added Notification Modal -->

     <div id="transferModal" class="modal-overlay">
         <div class="modal-panel transfer-panel">
              <button id="closeTransferBtn" class="close-btn">√ó</button>
              <h2><i class="fas fa-exchange-alt"></i> Chuy·ªÉn ƒêi·ªÉm</h2>

              <!-- Receive Section -->
              <div class="transfer-section receive-section">
                  <h3><i class="fas fa-download"></i> Nh·∫≠n ƒêi·ªÉm</h3>
                  <p>G·ª≠i ID ng∆∞·ªùi d√πng duy nh·∫•t c·ªßa b·∫°n cho ng∆∞·ªùi mu·ªën chuy·ªÉn ƒëi·ªÉm:</p>
                  <div class="uid-display-wrapper">
                      <span id="currentUserUidDisplay" class="uid-display">ƒêang t·∫£i ID...</span>
                      <button id="copyUidBtn" class="copy-uid-btn" title="Sao ch√©p ID"><i class="fas fa-copy"></i></button>
                  </div>
                  <p id="copyUidFeedback" class="info-message small-feedback"></p>
              </div>

              <hr class="settings-divider">

              <!-- Send Section -->
              <div class="transfer-section send-section">
                  <h3><i class="fas fa-upload"></i> G·ª≠i ƒêi·ªÉm</h3>
                  <p class="transfer-rules">
                      <strong>Y√™u c·∫ßu:</strong> Ph·∫£i l√† t√†i kho·∫£n <strong class="superverified-text">Super Verified</strong> v√† ƒë√£ <strong>x√°c th·ª±c email</strong>.<br>
                      Sau khi chuy·ªÉn, b·∫°n ph·∫£i c√≤n l·∫°i √≠t nh·∫•t <strong>500</strong> ƒëi·ªÉm.<br>
                      S·ªë ƒëi·ªÉm chuy·ªÉn t·ªëi thi·ªÉu l√† <strong>50</strong>.
                  </p>
                  <div class="setting-item">
                      <label for="recipientUidInput">ID Ng∆∞·ªùi Nh·∫≠n:</label>
                      <input type="text" id="recipientUidInput" placeholder="Nh·∫≠p ID Firebase c·ªßa ng∆∞·ªùi nh·∫≠n">
                  </div>
                  <div class="setting-item">
                      <label for="transferAmountInput">S·ªë ƒêi·ªÉm Chuy·ªÉn:</label>
                      <input type="number" id="transferAmountInput" placeholder="√çt nh·∫•t 50 ƒëi·ªÉm" min="50">
                  </div>
                  <p id="transferErrorMsg" class="error-message"></p>
                  <button id="confirmTransferBtn" class="control-button transfer-action-btn" disabled>Chuy·ªÉn ƒêi·ªÉm</button>
              </div>
         </div>
     </div>
    <div id="entryWarningModal" class="modal-overlay show">
        <div class="modal-panel warning-panel">
             <h2><i class="fas fa-exclamation-triangle"></i> A1KingBET88 Th√¥ng B√°o</h2>
             <p>
                 Trang web ƒë∆∞·ª£c t·∫°o ra nh·∫±m m·ª•c ƒë√≠ch m√¥ ph·ªèng c√°c game T√†i X·ªâu online nh·∫±m m·ª•c ƒë√≠ch <strong>gi·∫£i tr√≠ v√† gi√°o d·ª•c</strong>.<br>
                 Web kh√¥ng nh·∫±m m·ª•c ƒë√≠ch c·ªï x√∫y cho c√°c h√†nh vi ƒë√°nh b·∫°c online vi ph·∫°m ph√°p lu·∫≠t.<br>
                 <strong>H√£y tr√°nh xa c√°c h√¨nh th·ª©c c·ªù b·∫°c online vi ph·∫°m ph√°p lu·∫≠t!</strong>
                 <br><br>
                 B·∫±ng vi·ªác b·∫•m n√∫t ph√≠a d∆∞·ªõi, <strong>b·∫°n ƒë·ªìng √Ω r·∫±ng b·∫°n ƒë√£ ƒë·ªß nh·∫≠n th·ª©c v√† ch·ªâ s·ª≠ d·ª•ng trang web ƒë√∫ng v·ªõi m·ª•c ƒë√≠ch ban ƒë·∫ßu!</strong>
                 <br><br>
                 M√°y ch·ªß c·ªßa m√¨nh s·∫Ω ng·∫Øt n·∫øu trong 15 ph√∫t kh√¥ng c√≥ l∆∞·ª£t truy c·∫≠p n√™n <strong>n·∫øu web b√°o l·ªói k·∫øt n·ªëi server, h√£y ƒë·ª£i 1 ph√∫t v√† th·ª≠ l·∫°i</strong>.
             </p>
             <button id="acceptWarningBtn">T√¥i ƒë√£ ƒë·ªçc v√† ƒë·ªìng √Ω</button>
        </div>
    </div>

    <div id="authModal" class="modal-overlay">
        <div class="modal-panel auth-panel">
             <h2><i class="fas fa-user-check"></i> A1KingBET88</h2>
             <p>ƒêƒÉng nh·∫≠p ho·∫∑c ƒêƒÉng k√Ω ƒë·ªÉ l∆∞u ƒëi·ªÉm, chat, xem l·ªãch s·ª≠! Ho·∫∑c ti·∫øp t·ª•c m√† kh√¥ng c·∫ßn t√†i kho·∫£n.</p>
             <div class="auth-tabs">
                 <button class="tab-link active" data-tab="login">ƒêƒÉng nh·∫≠p</button>
                 <button class="tab-link" data-tab="register">ƒêƒÉng k√Ω</button>
             </div>
             <div id="loginTab" class="auth-tab-content active">
                 <h3>ƒêƒÉng nh·∫≠p</h3>
                 <div class="setting-item"><label for="loginEmail">Email:</label><input type="email" id="loginEmail" placeholder="Nh·∫≠p email"></div>
                   <div class="setting-item password-input-wrapper">
                     <label for="loginPassword">M·∫≠t kh·∫©u:</label>
                     <input type="password" id="loginPassword" placeholder="Nh·∫≠p m·∫≠t kh·∫©u">
                     <button type="button" class="toggle-password" data-target="loginPassword" title="Hi·ªán/·∫®n m·∫≠t kh·∫©u">
                         <i class="fas fa-eye"></i>
                     </button>
                 </div>
                 <p id="loginError" class="error-message"></p><button id="loginBtn" class="auth-action-btn">ƒêƒÉng nh·∫≠p</button>
             </div>
             <div id="registerTab" class="auth-tab-content">
                 <h3>ƒêƒÉng k√Ω</h3>
                  <div class="setting-item"><label for="registerUsername">T√™n hi·ªÉn th·ªã:</label><input type="text" id="registerUsername" maxlength="15" placeholder="T√™n ng∆∞·ªùi ch∆°i (t·ªëi ƒëa 15 k√Ω t·ª±)"></div>
                 <div class="setting-item"><label for="registerEmail">Email:</label><input type="email" id="registerEmail" placeholder="Nh·∫≠p email h·ª£p l·ªá"></div>
                 <div class="setting-item password-input-wrapper">
                     <label for="registerPassword">M·∫≠t kh·∫©u:</label>
                     <input type="password" id="registerPassword" placeholder="√çt nh·∫•t 6 k√Ω t·ª±">
                     <button type="button" class="toggle-password" data-target="registerPassword" title="Hi·ªán/·∫®n m·∫≠t kh·∫©u">
                         <i class="fas fa-eye"></i>
                     </button>
                 </div>
                 <p id="registerError" class="error-message"></p><button id="registerBtn" class="auth-action-btn">ƒêƒÉng k√Ω</button>
             </div>
             <button id="playGuestBtn" class="guest-btn">Ch∆°i kh√¥ng c·∫ßn ƒëƒÉng nh·∫≠p</button>
        </div>
    </div>

    <div id="congratsModal" class="modal-overlay">
         <div class="modal-panel congrats-panel">
             <button id="closeCongratsBtn" class="close-btn">√ó</button>
             <h2>üéâ Ch√∫c M·ª´ng! üéâ</h2>
             <p>B·∫°n ƒë√£ ƒë·∫°t <strong>40000</strong> ƒëi·ªÉm ho·∫∑c h∆°n!</p>
             <p>Ph·∫ßn th∆∞·ªüng ƒë·∫∑c bi·ªát d√†nh cho ng∆∞·ªùi ch∆°i c√≥ ID:</p>
             <p class="congrats-uid" id="congratsUid">USER_ID_PLACEHOLDER</p>
             <p>H√£y li√™n h·ªá C√°o ƒë·ªÉ ki·ªÉm tra nh·∫≠n th∆∞·ªüng. ƒê·∫øn khi nh·∫≠n th∆∞·ªüng th√†nh c√¥ng, ƒë·ª´ng ƒë·ªÉ ƒëi·ªÉm t·ª•t xu·ªëng d∆∞·ªõi 40000.</p>
             <button id="closeCongratsBtnConfirm" class="control-button">OK</button>
         </div>
     </div>

    <div class="game-wrapper" style="display: none;">
        <div class="game-header">
             <div id="authStatus">
                 <div class="logged-out-view">
                     <button id="showAuthModalBtn" class="auth-link-btn">ƒêƒÉng nh·∫≠p / ƒêƒÉng k√Ω</button>
                 </div>
                 <div class="logged-in-view" style="display: none;">
                      <div class="user-info">
                         <i class="fas fa-user-circle avatar" id="currentUserAvatar"></i>
                         <span class="username" id="currentUsername"></span>
                      </div>
                     <span class="points-display">ƒêi·ªÉm: <span id="userPoints">0</span>
                         <button id="transferPointsBtn" class="transfer-icon-btn" title="Chuy·ªÉn/Nh·∫≠n ƒëi·ªÉm" style="display: none;">
                             <i class="fas fa-exchange-alt"></i>
                         </button>
                     </span>
                 </div>
             </div>
             <h1 class="game-title desktop-game-title">A1KingBET88</h1>
            <div class="header-buttons">
                <button id="toggleMusicBtn" title="T·∫Øt/B·∫≠t nh·∫°c"><i class="fas fa-volume-up"></i></button>
                <button id="infoBtn" title="Th√¥ng tin"><i class="fas fa-info-circle"></i></button>
                <button id="toggleHistoryBtn" title="L·ªãch s·ª≠ chi ti·∫øt"><i class="fas fa-history"></i></button>
                <button id="settingsBtn" title="C√†i ƒë·∫∑t"><i class="fas fa-cog"></i></button>
                <button id="logoutBtn" class="auth-link-btn logout-btn" title="ƒêƒÉng xu·∫•t" style="display: none;"><i class="fas fa-sign-out-alt"></i></button>
            </div>
        </div>

         <div class="main-game-area">
             <h2 class="mobile-game-title">A1KingBET88</h2>
             <div class="session-info">
                 <p class="disclaimer-message">ƒê√¢y l√† trang web m√¥ ph·ªèng nh·∫Øm m·ª•c ƒë√≠ch gi·∫£i tr√≠/gi√°o d·ª•c, kh√¥ng h·ªó tr·ª£ n·∫°p/r√∫t ti·ªÅn. H√£y c·∫£nh gi√°c, t·ªët h∆°n l√† tr√°nh xa nh·ªØng h√¨nh th·ª©c c·ªù b·∫°c online!</p>
                 <span id="sessionStatus">ƒêang k·∫øt n·ªëi...</span>
             </div>
             <div class="betting-zone">
                 <div class="bet-section tai-section">
                     <div class="bet-title">T√ÄI</div>
                     <button id="betTai" class="bet-button">ƒê·∫∑t T√†i</button>
                 </div>
                <div class="center-display" id="centerDisplay">
                    <div class="center-content-wrapper">
                        <div id="timerArea">
                            <div class="timer-label" id="timerLabel">Th·ªùi gian c∆∞·ª£c</div>
                            <div class="timer-value" id="timer">--</div>
                        </div>
                        <div id="resultArea" style="visibility: hidden;">
                            <div class="dice-container-results">
                                <span class="dice" id="dice1">?</span>
                                <span class="dice" id="dice2">?</span>
                                <span class="dice" id="dice3">?</span>
                            </div>
                            <div class="result-sum" id="diceSum">?</div>
                            <div class="result-outcome" id="gameOutcome">?</div>
                        </div>
                        <div id="resultCover" style="display: none;">
                            <i class="fas fa-hand-paper"></i>
                        </div>
                    </div>
                </div>
                 <div class="bet-section xiu-section">
                     <div class="bet-title">X·ªàU</div>
                     <button id="betXiu" class="bet-button">ƒê·∫∑t X·ªâu</button>
                 </div>
             </div>
             <div class="history-row" id="historyRow"><span>L·ªãch s·ª≠ g·∫ßn nh·∫•t:</span></div>
             <div class="betting-controls">
                  <div class="bet-input-group"><label for="betAmount">ƒêi·ªÉm c∆∞·ª£c:</label><input type="number" id="betAmount" placeholder="Nh·∫≠p ƒëi·ªÉm" min="1"></div>
                  <button id="cancelBetBtn" class="control-button" disabled>H·ªßy C∆∞·ª£c</button>
                  <p id="currentBetMessage"></p>
                  <p id="resultMessage"></p>
                  <button id="skipCountdownBtn" style="display: none;" title="B·ªè qua ƒë·∫øm ng∆∞·ª£c (Dev)">
                        Skip
                  </button>
             </div>
         </div>
            <div class="leaderboard-chat-wrapper">
            <div class="leaderboard-area" id="leaderboardArea">
                <h4><i class="fas fa-trophy"></i> B·∫£ng X·∫øp H·∫°ng</h4>
                <p class="leaderboard-update-info">C·∫≠p nh·∫≠t m·ªói 5 ph√∫t</p>
                <ol id="leaderboardList">
                    <li>Vui l√≤ng ch·ªù</li>
                </ol>
            </div>
                <div class="chat-area" id="chatArea" style="display: none;">
                    <h4><i class="fas fa-comments"></i> Chat Tr·ª±c Ti·∫øp</h4>
                    <p class="chat-guideline">Vui l√≤ng ·ª©ng x·ª≠ vƒÉn minh (c·∫ßn x√°c minh t√†i kho·∫£n ƒë·ªÉ chat)</p>
                    <div class="chat-messages" id="chatMessages">
                    </div>
                                    <button id="newMessagesIndicator" class="new-message-indicator" style="display: none;">
                    <i class="fas fa-arrow-down"></i> Tin nh·∫Øn m·ªõi
                </button>
                    <div class="chat-input-area">
                        <input type="text" id="chatInput" placeholder="Nh·∫≠p tin nh·∫Øn..." maxlength="200" autocomplete="off">
                        <button id="chatSendBtn" title="G·ª≠i"><i class="fas fa-paper-plane"></i></button>
                    </div>
                </div>
            </div>

        <div id="historyPanelWrapper" class="modal-overlay"> <div id="historyPanel" class="modal-panel"><button id="closeHistoryBtn" class="close-btn">√ó</button><h2>L·ªãch S·ª≠ Chi Ti·∫øt</h2><ul id="historyList"></ul></div></div>
         <div id="settingsModalWrapper" class="modal-overlay"> <div id="settingsPanel" class="modal-panel"><button id="closeSettingsBtn" class="close-btn">√ó</button><h2>C√†i ƒë·∫∑t</h2><div class="setting-item"><label for="newUsernameInput">T√™n ng∆∞·ªùi ch∆°i:</label><input type="text" id="newUsernameInput" maxlength="15" placeholder="Nh·∫≠p t√™n (t·ªëi ƒëa 15 k√Ω t·ª±)"></div><div class="setting-item"><label>·∫¢nh ƒë·∫°i di·ªán:</label><div class="avatar-selection" id="avatarSelectionContainer"><button class="avatar-option selected" data-avatar="fas fa-user-circle" title="Ng∆∞·ªùi d√πng">üë§</button><button class="avatar-option" data-avatar="fas fa-cat" title="M√®o">üê±</button><button class="avatar-option" data-avatar="fas fa-dog" title="Ch√≥">üê∂</button><button class="avatar-option" data-avatar="fas fa-hippo" title="H√† m√£">ü¶õ</button><button class="avatar-option" data-avatar="fas fa-dragon" title="R·ªìng">üêâ</button><button class="avatar-option" data-avatar="fas fa-ghost" title="Ma">üëª</button><button class="avatar-option" data-avatar="fas fa-robot" title="Robot">ü§ñ</button><button class="avatar-option" data-avatar="fas fa-frog" title="·∫æch">üê∏</button><button class="avatar-option" data-avatar="fas fa-poo" title="C·ª•c...">üí©</button></div></div><button id="saveSettingsBtn">L∆∞u Thay ƒê·ªïi</button><button id="sendVerificationBtn" class="control-button verification-btn" style="display: none; margin-top: 15px;">G·ª≠i Email X√°c Th·ª±c</button><p id="verificationStatusMessage" class="info-message" style="font-size: 0.85em; text-align: center; margin-top: 5px; color: #aaa; min-height: 1.1em;"></p><hr class="settings-divider"><div id="devPasswordSection"><h4>C√†i ƒë·∫∑t N√¢ng cao</h4><div class="setting-item"><label for="devPasswordInput">M·∫≠t kh·∫©u:</label><input type="password" id="devPasswordInput" placeholder="Nh·∫≠p m·∫≠t kh·∫©u nh√† ph√°t tri·ªÉn"><button id="unlockDevBtn">M·ªü kh√≥a</button></div></div><div id="developerSettingsArea" style="display: none;"><h4>C√†i ƒë·∫∑t Nh√† ph√°t tri·ªÉn</h4><div class="setting-item"><label for="sessionDurationInput">Th·ªùi gian phi√™n (gi√¢y):</label><input type="number" id="sessionDurationInput" min="10" max="120" step="1" placeholder="Do server qu·∫£n l√Ω" disabled><small>(Do server qu·∫£n l√Ω)</small></div><div class="setting-item dev-input-button-group"><label for="devSetPointsInput">ƒê·∫∑t ƒëi·ªÉm:</label><input type="number" id="devSetPointsInput" placeholder="Nh·∫≠p ƒëi·ªÉm"><button id="devSetPointsBtn">ƒê·∫∑t</button></div><div class="setting-item"><label>Nh·∫°c n·ªÅn:</label><button id="skipSongBtn">B√†i K·∫ø Ti·∫øp</button></div><div class="setting-item dev-input-button-group">
    <label for="devSongSelect">Ch·ªçn b√†i:</label>
    <select id="devSongSelect" style="flex-grow: 1; padding: 5px;">
        <option value="">-- Ch·ªçn b√†i --</option>
    </select>
    <button id="devPlaySongBtn" style="padding: 5px 10px;">Ph√°t</button>
</div><p class="dev-note">L∆∞u √Ω: Skip c√≥ th·ªÉ c·∫ßn server h·ªó tr·ª£.</p></div></div></div>
         <div id="infoModalWrapper" class="modal-overlay"> <div id="infoPanel" class="modal-panel"><button id="closeInfoBtn" class="close-btn">√ó</button><h2>Th√¥ng Tin</h2><p><strong>A1KingBET88 Live - Trang T√†i X·ªâu thi·∫øt k·∫ø ƒë·∫πp nh·∫•t, cam k·∫øt kh√¥ng l·∫•y ti·ªÅn c·ªßa b·∫°n</strong></p><p>Trang web m√¥ ph·ªèng c√°c tr√≤ ch∆°i t√†i x·ªâu online, kh√¥ng c·ªï x√∫y c√°c h√†nh vi vi ph·∫°m ph√°p lu·∫≠t.</p><p>ƒê∆∞·ª£c t·∫°o ra b·ªüi C√°o v√† c·ªông s·ª± AI c·ªßa anh ·∫•y.</p><p>Li√™n h·ªá: maiducanh@17022008.xyz</p></div></div>
<div id="gameOverMessage" class="game-over-overlay">
    <div class="game-over-content">
        <h2>üò¢ Xin Chia Bu·ªìn! üí∏</h2>
        <p>B·∫°n ƒë√£ v·ª° n·ª£ r·ªìi, b·∫°n c√≥ mu·ªën vay th√™m v·ªën c·ªßa nh√† c√°i A1KingBET88 kh√¥ng?</p>
        <p><b>B·∫°n s·∫Ω kh√¥ng ph·∫£i tr·∫£ l√£i (hay g·ªëc)!</b></p>
        <button id="restartGameBtn">Ok, t√¥i vay.</button>
    </div>
</div>

    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="script.js"></script>
</body>
</html>